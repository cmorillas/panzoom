
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Expires" content="0">
 	<meta http-equiv="Last-Modified" content="0">
 	<meta http-equiv="Cache-Control" content="no-cache, mustrevalidate">
	<meta http-equiv="Pragma" content="no-cache">
	<!-- -->
	<meta name="viewport" content="width=device-width, initial-scale=2.0, minimum-scale=1.0, maximum-scale=4.0, user-scalable=yes, shrink-to-fit=no"  />
	
	
	<title>Cesar</title>
	<link rel="stylesheet" href="style.css">
	<script src="https://hammerjs.github.io/dist/hammer.js"></script>
	<script type="module">
		import {panzoom} from './panzoom.js';
		document.addEventListener("DOMContentLoaded", (e) => {
			let hammertime = new Hammer(green);
			hammertime.add( new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, threshold: 0 }) );
			hammertime.on('pan', handle_hammer);
			let isDragging = false;
			let lastX, lastY;
			function handle_hammer(e) {
				let elem = e.target;
				if ( !isDragging ) {
			    	isDragging = true;
			    	lastX = elem.offsetLeft;
			    	lastY = elem.offsetTop; 
			    }   
				elem.style.left = e.deltaX + lastX + "px";
				elem.style.top  = e.deltaY + lastY + "px";
				if ( e.isFinal ) {
			    	isDragging = false;
			    }
			}
			panzoom('#red',{
				wheel_step:0.01,
				scale_min: 0.01,
				scale_max: 4,
				bound: 'outer',
				zoom: true
			});

			panzoom('#pink',{
				wheel_step:0.1,
				scale_min: 1,
				scale_max: 10,
				bound: 'inner',
				zoom: true
			});
		});
			//console.log('a', pan.b, panzoom.a);
		
	</script>

</head> 
<body style="position: absolute; background-color: black; margin:0px; padding: 0px; width:100%; height:100%; overflow:hidden">
	<div id="map" style="background-color:pink; margin:50px; width:800px; height:400px; position:absolute">
	<div id="container" style="width:500px; height:350px; position:absolute; top:10px; left:10px; overflow: hidden; background-color:red; touch-action:none; transform: scale(1)">
		<div id="blue" style="width:40px; height:40px; position:relative; top:10px; left:10px; background-color:blue;"></div>
		<div id="red" style=" width:2000px; height:1000px; position:absolute; top:0px; left:0px; background-image: url('http://test.telytec.com/spatial/images/main_background.jpg'); user-select: none; touch-action:none; ">
			<div id="pink" style="width:50px; height:50px; background-color: grey; position:absolute; top:0px">ces</div>
		</div>		
	</div>
	</div>
	<div id="green" style="width:50px; height:50px; position:absolute; top:50px; left:80px; background-color:green; user-select: none; touch-action: none;">d</div>
	
	<div id="myElement3">Drag Me</div>
	<div id="status">Thanks for the fish</div>
	<div class="outer" id="out">
		<div class="inner" id="inner1"></div>
		<div class="inner" id="inner2"></div>
	</div>
	
</body>
</html>

