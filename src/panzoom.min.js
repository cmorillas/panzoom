"use strict";let status;export const panzoom=(t,e={})=>{const o=!1!==e.pan,n=!1!==e.zoom,r=["inner","outer","none"].includes(e.bound)?e.bound:"inner",a=e.wheel_step>.01&&e.wheel_step<4?e.wheel_step:.2,i=e.scale_min>.01&&e.scale_min<20?e.scale_min:.01,s=e.scale_max>.01&&e.scale_max<20?e.scale_max>i?e.scale_max:i:.5;let f,h,g,d,u,p,c,l,m,x,M=!1;function y(t,e,o,n){const a=new WebKitCSSMatrix(getComputedStyle(t).getPropertyValue("transform")),{a:f,b:h,c:g,d:d,e:u,f:p}=a,{x:c,y:l,width:m,height:x}=t.getBoundingClientRect(),{x:M,y:y,width:W,height:w}=t.parentNode.getBoundingClientRect();let v,H,C,b,N,P,S,T,_,L,E,X,Y=f+(e*=f);"inner"==r?(C=W/t.offsetWidth,b=w/t.offsetHeight,Y>(N=Math.min(C,b,s))&&(e=0),Y=Math.min(Math.max(i,Y),N)):"outer"==r?(P=W/t.offsetWidth,S=w/t.offsetHeight,Y<(T=Math.max(P,S,i))&&(e=0),Y=Math.max(Math.min(s,Y),T)):"none"==r&&((Y<i||Y>s)&&(e=0),Y=Math.min(Math.max(i,Y),s)),v=t.offsetLeft+e*(t.offsetWidth/2-o),H=t.offsetTop+e*(t.offsetHeight/2-n),"inner"==r?(_=t.offsetWidth/2*(Y-1)-u,L=t.offsetHeight/2*(Y-1)-p,E=t.parentNode.offsetWidth-t.offsetWidth-t.offsetWidth/2*(Y-1)-u,X=t.parentNode.offsetHeight-t.offsetHeight-t.offsetHeight/2*(Y-1)-p,v=Math.min(Math.max(_,v),E),H=Math.min(Math.max(L,H),X)):"outer"==r&&(E=t.offsetWidth/2*(Y-1)-u,X=t.offsetHeight/2*(Y-1)-p,_=t.parentNode.offsetWidth-t.offsetWidth-t.offsetWidth/2*(Y-1)-u,L=t.parentNode.offsetHeight-t.offsetHeight-t.offsetHeight/2*(Y-1)-p,v=Math.max(Math.min(E,v),_),H=Math.max(Math.min(X,H),L));const R=`matrix(${Y}, ${h}, ${g}, ${Y}, ${u}, ${p})`;t.style.transform=R,t.style.left=v+"px",t.style.top=H+"px"}function W(t){if(t.target!==t.currentTarget)return;const e=t.wheelDelta*a/120;y(t.target,e,t.offsetX,t.offsetY)}function w(t){if(t.preventDefault(),t.stopPropagation(),t.target!==t.currentTarget)return;l=window.visualViewport.scale,m=window.devicePixelRatio,f=t.target.offsetLeft,h=t.target.offsetTop;const e=new WebKitCSSMatrix(getComputedStyle(t.target).getPropertyValue("transform")),{a:o,b:n,c:a,d:i,e:s,f:x}=e,M=o;"none"!=r&&(g=t.target.offsetWidth/2*(M-1)-s,d=t.target.offsetHeight/2*(M-1)-x,u=t.target.parentNode.offsetWidth-t.target.offsetWidth-t.target.offsetWidth/2*(M-1)-s,p=t.target.parentNode.offsetHeight-t.target.offsetHeight-t.target.offsetHeight/2*(M-1)-x);const{x:y,y:W,width:w,height:v}=t.target.parentNode.getBoundingClientRect(),H=t.target.parentNode.offsetWidth;c=w/H,t.target.setPointerCapture(t.pointerId)}function v(t){if(t.target!==t.currentTarget)return;if(M)return;if(!t.target.hasPointerCapture(t.pointerId))return;t.preventDefault(),t.stopPropagation();const e=t.movementX/l/m,o=t.movementY/l/m;f+=e/c,h+=o/c,"none"!=r&&(f=Math.min(Math.max(g,f),u),h=Math.min(Math.max(d,h),p)),t.target.style.left=f+"px",t.target.style.top=h+"px"}function H(t){t.preventDefault(),t.stopPropagation(),t.target.releasePointerCapture(t.pointerId)}function C(t){t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),2==t.targetTouches.length&&(M=!0,x=Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY)))}function b(t){if(t.target===t.currentTarget&&2==t.targetTouches.length&&2==t.changedTouches.length){const e=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,n=Math.hypot(e,o),r=(n-x)/50;x=n;const{x:a,y:i,width:s,height:f}=t.target.getBoundingClientRect(),h=new WebKitCSSMatrix(getComputedStyle(t.target).getPropertyValue("transform")),{a:g,b:d,c:u,d:p,e:c,f:l}=h,m=(t.touches[0].pageX-a)/s*t.target.offsetWidth,M=(t.touches[0].pageY-i)/f*t.target.offsetHeight,W=m+((t.touches[1].pageX-a)/s*t.target.offsetWidth-m)/2,w=M+((t.touches[1].pageY-i)/f*t.target.offsetHeight-M)/2;y(t.target,r,W,w)}}function N(t){0==t.targetTouches.length&&(M=!1)}return document.querySelectorAll(":scope "+t).forEach(t=>{(function(t){const e=t.offsetWidth,o=t.parentNode.offsetWidth,n=t.offsetHeight,a=t.parentNode.offsetHeight;if("inner"==r&&(e>o||n>a))return console.error("panzoom() error: In the 'inner' mode, with or height must be smaller than its container (parent)"),!1;if("outer"==r&&(e<o||n<a))return console.error("panzoom() error: In the 'outer' mode, with or height must be larger than its container (parent)"),!1;const{x:i,y:s,width:f,height:h}=t.getBoundingClientRect(),{x:g,y:d,width:u,height:p}=t.parentNode.getBoundingClientRect();return t.style.position="absolute",t.style.removeProperty("margin"),t.style.backgroundSize="cover",!0})(t)&&(n&&t.addEventListener("wheel",W,{passive:!0}),o&&(t.addEventListener("touchstart",C),t.addEventListener("touchmove",b),t.addEventListener("touchend",N),t.addEventListener("pointerdown",w),t.addEventListener("pointerup",H),t.addEventListener("pointermove",v)))}),!0};